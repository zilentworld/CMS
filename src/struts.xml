<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.1//EN"
"http://struts.apache.org/dtds/struts-2.1.dtd">
<struts>

 	<constant name="struts.objectFactory" value="spring" />
 	<constant name="struts.enable.SlashesInActionNames" value="true"/>
	<constant name="struts.mapper.alwaysSelectFullNamespace" value="false"/>
	<constant name="struts.patternMatcher" value="regex" />
	<package name="default" namespace="/" extends="struts-default">

		<result-types>
			<result-type name="tiles"
				class="org.apache.struts2.views.tiles.TilesResult" />
		</result-types>

		<action name="Home" class="cmsNavAction" method="showHome">
			<result name="success" type="tiles">main-welcome</result>
		</action>
		<action name="About" class="cmsNavAction" method="showAbout">
			<result name="success" type="tiles">main-about</result>
		</action>
		<action name="ContactUs" class="cmsNavAction" method="showContactUs">
			<result name="success" type="tiles">main-contactUs</result>
		</action>
		<action name="Account" class="cmsNavAction" method="showAccount">
			<result name="login" type="tiles">main-register-login</result>
			<result name="success" type="tiles">main-account</result>
		</action>
		<action name="checkAccount" class="cmsNavAction" method="checkAccount">
			<result name="login" type="tiles">main-register-login</result>
			<result name="success" type="redirect">Account</result>
		</action>
		<action name="processRegister" class="registerCms">
			<result name="error" type="tiles">main-register-login</result>
			<result name="input" type="tiles">main-register-login</result>
			<!--<result name="success" type="tiles">main-account</result>-->
			<result name="success">${sourcePage}</result>
			<!--<result name="success" type="redirect">${sourcePage}</result>-->
		</action>
		<action name="processLogin" class="loginAction">
			<result name="error" type="tiles">main-register-login</result>
			<result name="input" type="tiles">main-register-login</result>
			<result name="success">${sourcePage}</result>
		</action>
		<action name="SiteList" class="cmsAccountAction" method="showSiteList">
			<result name="success" type="tiles">main-account-siteList</result>
		</action>
		<action name="UserList" class="cmsAccountAction" method="showUserList">
			<result name="success" type="tiles">main-account-userList</result>
		</action>
		<action name="UserSites" class="cmsAccountAction" method="showUserSites">
			<result name="success" type="tiles">main-account-userSites</result>
		</action>
		<action name="UserInfo" class="cmsAccountAction" method="showUserInfo">
			<result name="success" type="tiles">main-account-userInfo</result>
		</action>
		<action name="deactivateUser" class="cmsAccountAction" method="deactivateUser">
			<result name="error">UserList</result>
			<result name="success">UserList</result>
		</action>
		<action name="activateUser" class="cmsAccountAction" method="activateUser">
			<result name="error">UserList</result>
			<result name="success">UserList</result>
		</action>
		<action name="EditUser" class="cmsEdituserAction" method="showEditUser">
			<result name="error" type="tiles">main-account-editUser</result>
			<result name="success" type="tiles">main-account-editUser</result>
		</action>
		<action name="SaveEditUser" class="cmsEdituserAction">
			<result name="error" type="tiles">main-account-editUser</result>
			<result name="input">EditUser</result>
			<result name="success" type="redirect">${sourcePage}</result>
		</action>
		<action name="Logout" class="loginAction" method="processLogout">
			<result name="success" type="tiles">main-welcome</result>
		</action>
		<action name="TemplateList" class="createSiteAction" method="showTemplate">
			<result name="success" type="tiles">main-template</result>
		</action>
		<action name="PickTemplate" class="createSiteAction" method="pickTemplate">
			<result name="success">EnterUrl</result>
		</action>
		<action name="EnterUrl" class="createSiteAction" method="showUrlEntry">
			<result name="success" type="tiles">main-enterUrl</result>
		</action>
		<action name="ConfirmUrl" class="createSiteAction" method="processUrl">
			<result name="login" type="tiles">main-register-login</result>
			<result name="success">ProcessNewSite</result>
		</action>
		<action name="ProcessNewSite" class="createSiteAction" method="processNewSite">
			<result name="success" type="redirect">UserSites</result>
		</action>
		<action name="CMS" class="cmsFileManageAction" method="showCMS">
			<result name="success" type="tiles">main-cms</result>
		</action>
		<action name="EditFile" class="cmsFileManageAction" method="showEditFile">
			<result name="success" type="tiles">main-editfile</result>
		</action>
		<action name="FilterCMS" class="cmsFileManageAction" method="showFilteredCMS">
			<result name="success" type="tiles">main-cms</result>
		</action>
		<action name="saveCMS" class="cmsFileManageAction" method="saveCMS">
			<result name="success" type="chain">
				<param name="actionName">CMS</param>
				<param name="cmsUserSiteId">${cmsUserSiteId}</param>
			</result>
		</action>
		<action name="AddNewFile" class="cmsAddNewFileAction" method="showAddFile">
			<result name="success" type="tiles">main-addFile</result>
			<result name="input" type="tiles">main-addFile</result>
		</action>
		<action name="doAddNewFile" class="cmsAddNewFileAction" method="addNewFile">
			<result name="success" type="chain">
				<param name="actionName">CMS</param>
				<param name="cmsUserSiteId">${cmsUserSiteId}</param>
			</result>
			<result name="input" type="tiles">main-addFile</result>
		</action>
		<action name="Preview" class="cmsFileManageAction" method="showPreview">
			<result name="success">/WEB-INF/jsp/cmsPages/main-preview.jsp</result>
		</action>
		<action name="DeleteFile" class="cmsFileManageAction" method="deleteFile">
			<result name="success" type="chain">
				<param name="actionName">CMS</param>
				<param name="cmsUserSiteId">${cmsUserSiteId}</param>
			</result>
		</action>
		<action name="PublishSite" class="cmsPublishSiteAction">
			<result name="success">CMS</result>
		</action>

		<action name="/{siteUrl}/{*}" class="cmsSiteNavAction" method="toFile" >
			<param name="fileName">{2}</param>
			<result name="success">${siteFilePath}</result>
			<result name="error" type="tiles">main-message</result>
		</action>

		<action name="/{siteUrl}" class="cmsSiteNavAction">
			<result name="success">${siteFilePath}</result>
			<result name="error" type="tiles">main-message</result>
		</action>

	</package>

</struts>
