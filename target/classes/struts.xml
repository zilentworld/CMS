<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC 
"-//Apache Software Foundation//DTD Struts Configuration 2.1//EN" 
"http://struts.apache.org/dtds/struts-2.1.dtd">
<struts>
    <constant name="struts.devMode" value="true" />
    <package name="test" extends="struts-default" namespace="/">
    
        <result-types>
            <result-type name="tiles" class="org.apache.struts2.views.tiles.TilesResult" />
        </result-types>
    
	    <action name="showTemplate" class="newBlogSite"  method="showTemplate">
	        <result name="success">/WEB-INF/jsp/cmsPages/templatePicker.jsp</result>
	    </action>
	    
	    <action name="pickTemplate" class="newBlogSite">
	        <result name="error">/WEB-INF/jsp/cmsPages/templatePicker.jsp</result>
	        <result name="success">/WEB-INF/jsp/cmsPages/requestRegister.jsp</result>
	    </action>
	    
	    <action name="processRegister" class="registerCms">
	        <result name="error">/WEB-INF/jsp/cmsPages/requestRegister.jsp</result>
	        <result name="input">/WEB-INF/jsp/cmsPages/requestRegister.jsp</result>
	        <result name="success">/WEB-INF/jsp/cmsPages/enterUrl.jsp</result>
	    </action>
	    
	    <action name="processLogin" class="loginAction">
	        <result name="error">/WEB-INF/jsp/cmsPages/requestRegister.jsp</result>
	        <result name="input">/WEB-INF/jsp/cmsPages/requestRegister.jsp</result>
	        <result name="success">/WEB-INF/jsp/cmsPages/enterUrl.jsp</result>
	    </action>
	    
	    <action name="confirmUrl" class="userSiteAction">
	        <result name="input">/WEB-INF/jsp/cmsPages/enterUrl.jsp</result>
	        <result name="error">/WEB-INF/jsp/cmsPages/enterUrl.jsp</result>
	        <result name="success" type="redirectAction">
	        	<param name="actionName">checkBlogUrl</param>
	        	<param name="blogSiteUrl">${cmsUserSite.blogUrl}</param>
	        </result>
	    </action>
	    
	    <action name="checkBlogUrl" class="checkBlogUrl">
	    	<result name="success" type="tiles">${nextAction}</result>
	    	<result name="error" type="redirect">/WEB-INF/jsp/cmsPages/index.jsp</result>
	    </action>
    </package>
</struts>
